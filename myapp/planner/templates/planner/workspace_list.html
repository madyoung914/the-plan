{% extends 'base.html' %}

{% block title %}My Workspaces{% endblock %}

{% block content %} 

{% if current_workspaces %}
    <h2>My Current Workspaces</h2>
    {% for workspace in current_workspaces %}
        <li><a href="{{ workspace.get_absolute_url }}">{{ workspace }}</a></li>

        <form action="{% url 'planner:workspace-list' %}" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this item?');">
                {% csrf_token %}
                <input type="hidden" name="delete_workspace_id" value="{{ workspace.pk }}">
                <button type="submit">Delete</button>
            </form>

        <form action="{% url 'planner:workspace-list' %}" method="POST" style="display:inline;">
            {% csrf_token %}
            <input type="hidden" name="complete_workspace_id" value="{{ workspace.pk }}">
            <button type="submit">Archive?</button>
        </form>
    {% endfor %}
{% endif %}

{% if past_workspaces %}
    <h2>My Past Workspaces</h2>
    {% for workspace in past_workspaces %}
        <li><a href="{{ workspace.get_absolute_url }}">{{ workspace }}</a></li>

        <form action="{% url 'planner:workspace-list' %}" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this item?');">
                {% csrf_token %}
                <input type="hidden" name="delete_workspace_id" value="{{ workspace.pk }}">
                <button type="submit">Delete</button>
            </form>

        <form action="{% url 'planner:workspace-list' %}" method="POST" style="display:inline;">
            {% csrf_token %}
            <input type="hidden" name="complete_workspace_id" value="{{ workspace.pk }}">
            <button type="submit">Unarchive?</button>
        </form>
        
    {% endfor %}
{% endif %}


<br>
<a href="{% url 'planner:workspace-create' %}">Create workspace</a>

<br>
<a href="{% url 'useraccounts:homepage' %}">Go back to homepage</a>

{% endblock %}